{% extends "base.html" %}

{% block title %}Blog - Omega Makena{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 fade-in">
    
    <!-- Header -->
    <div class="text-center mb-16">
        <h1 class="text-5xl md:text-6xl font-display font-bold mb-6 text-light-text dark:text-dark-text">
            Blog
        </h1>
        <p class="text-xl text-light-muted dark:text-dark-muted max-w-3xl mx-auto">
            Thoughts on AI, poetry, psychology, and the intersection of technology with human experience.
        </p>
    </div>
    
    <!-- Categories and Posts -->
    <div class="space-y-6">
        {% for category in categories %}
        <div class="bg-light-card dark:bg-dark-card rounded-lg shadow-md overflow-hidden">
            <!-- Category Header (Always Visible) -->
            <button onclick="toggleCategory('{{ category }}')" class="w-full flex justify-between items-center p-6 md:p-8 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200">
                <div class="flex items-center gap-4">
                    <h2 class="text-2xl md:text-3xl font深入isplay font-bold text-light-accent dark:text-dark-accent">
                        {{ category|replace('ai-ml', 'AI & Machine Learning')|replace('finance-economics', 'Finance & Economics')|replace('self-improvement', 'Self-Improvement')|replace('tech-concepts', 'Tech Concepts')|replace('random', 'Random Thoughts')|title }}
                    </h2>
                    <span class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-sm rounded-full font-medium">
                        {{ posts_by_category[category]|length }} posts
                    </span>
                </div>
                <svg id="icon-{{ category }}" class="w-6 h-6 text-light-accent dark:text-dark-accent transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            
            <!-- Category Posts (Collapsible) -->
            <div id="posts-{{ category }}" class="hidden px-6 md:px-8 pb-6 md:pb-8 pt-0">
                {% if posts_by_category[category] %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {% for post in posts_by_category[category] %}
                    <a href="/blog/{{ post.path }}" 
                       class="block p-5 border-2 border-gray-200 dark:border-gray-700 rounded-lg hover:border-light-link dark:hover:border-dark-link hover:shadow-md transition-all duration-300">
                        <h3 class="text-xl font-display font-semibold mb-2 text-light-text dark:text-dark-text">
                            {{ post.meta.title }}
                        </h3>
                        <p class="text-light-muted dark:text-dark-muted text-sm mb-3">
                            {{ post.meta.date|format_date }}
                        </p>
                        <p class="text-light-muted dark:text-dark-muted text-sm">
                            {{ post.meta.description }}
                        </p>
                        <div class="mt-3 text-light-link dark:text-dark-link font-semibold flex items-center text-sm">
                            Read more
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-light-muted dark:text-dark-muted italic text-center py-8">
                    No posts yet in this category.
                </p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    
    <script>
        function toggleCategory(category) {
            const postsDiv = document.getElementById('posts-' + category);
            const icon = document.getElementById('icon-' + category);
            
            postsDiv.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }
    </script>
    
</div>
{% endblock %}

