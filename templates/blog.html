{% extends "base.html" %}

{% block title %}Blog - Omega Makena{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20 fade-in">
    
    <div class="text-center mb-16">
        <h1 class="text-5xl md:text-6xl font-display font-bold mb-6 text-light-text dark:text-dark-text">
            Writing
        </h1>
        <p class="text-xl text-light-muted dark:text-dark-muted max-w-2xl mx-auto">
            Exploring the intersection of Artificial Intelligence, Economics, and the human experience.
        </p>
    </div>
    
    <div class="space-y-8">
        {% for category in categories %}
        <div class="bg-white dark:bg-[#151e2e] rounded-2xl border border-gray-100 dark:border-gray-800 overflow-hidden shadow-sm">
            <button onclick="toggleCategory('{{ category }}')" class="w-full flex justify-between items-center p-6 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-200">
                <div class="flex items-center gap-4">
                    <h2 class="text-xl md:text-2xl font-display font-bold text-light-text dark:text-dark-text">
                        {{ category|replace('ai-ml', 'AI & Machine Learning')|replace('finance-economics', 'Finance & Economics')|replace('self-improvement', 'Self-Improvement')|replace('tech-concepts', 'Tech Concepts')|replace('random', 'Random Thoughts')|title }}
                    </h2>
                    <span class="px-2.5 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs rounded-full font-mono font-medium border border-gray-200 dark:border-gray-700">
                        {{ posts_by_category[category]|length }}
                    </span>
                </div>
                <svg id="icon-{{ category }}" class="w-5 h-5 text-gray-400 transform rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            
            <div id="posts-{{ category }}" class="px-6 pb-8 pt-2">
                {% if posts_by_category[category] %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {% for post in posts_by_category[category] %}
                    <a href="/blog/{{ post.path }}" 
                       class="group block p-6 rounded-xl bg-gray-50 dark:bg-gray-900/50 border border-gray-100 dark:border-gray-800 hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-300">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-mono text-gray-500 dark:text-gray-500">{{ post.meta.date|format_date }}</span>
                        </div>
                        <h3 class="text-lg font-bold mb-2 text-light-text dark:text-dark-text group-hover:text-light-accent dark:group-hover:text-dark-accent transition-colors">
                            {{ post.meta.title }}
                        </h3>
                        <p class="text-sm text-light-muted dark:text-gray-400 line-clamp-2">
                            {{ post.meta.description }}
                        </p>
                    </a>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-light-muted dark:text-dark-muted italic text-sm text-center py-4">
                    No posts yet in this category.
                </p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    
    <script>
        function toggleCategory(category) {
            const postsDiv = document.getElementById('posts-' + category);
            const icon = document.getElementById('icon-' + category);
            
            postsDiv.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }
    </script>
    
</div>
{% endblock %}
